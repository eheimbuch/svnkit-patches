# HG changeset patch
# Parent 9abfa36f6139ae11c97109c81516d095d4a741aa
prepare for maven.scm-manager.org

diff -r 9abfa36f6139 build.gradle
--- a/build.gradle	Fri May 04 08:44:49 2012 +0200
+++ b/build.gradle	Fri May 04 11:27:42 2012 +0200
@@ -1,16 +1,19 @@
 group = 'sonia.svnkit'
-version = '1.7.4.1'
+scmVersion = "1.7.4.1-SNAPSHOT"
+version = '1.7.4'
 release = false
 target = '1.5'
 compatibleSvnVersion = '1.7.4'
 
 buildscript {
     apply from: 'build.defaults.gradle'
+    
     repositories {
         mavenRepo(urls: [buildPluginRepositoryURL]) {
             snapshotTimeout = org.gradle.api.internal.artifacts.ivyservice.GradleIBiblioResolver.ALWAYS
         }
     }
+    
     dependencies { classpath 'org.tmatesoft.build:build:0.9.8' }
 }
 
@@ -23,6 +26,20 @@
 allprojects {
     apply plugin : 'base'
     apply plugin : 'build'
+    
+    // apply scm version
+    project.version = project.scmVersion
+    
+    uploadMaven {
+      repositories.mavenDeployer {
+        repository(url: "http://maven.scm-manager.org/nexus/content/repositories/releases",{
+          authentication(userName: scmMavenRepoUsername, password: scmMavenRepoPassword)
+        })
+        snapshotRepository(url: "http://maven.scm-manager.org/nexus/content/repositories/snapshots",{
+          authentication(userName: scmMavenRepoUsername, password: scmMavenRepoPassword)
+        })
+      }
+    }
 }
 
 configure(javaProjects() + rootProject) {
diff -r 9abfa36f6139 svnkit-dav/build.gradle
--- a/svnkit-dav/build.gradle	Fri May 04 08:44:49 2012 +0200
+++ b/svnkit-dav/build.gradle	Fri May 04 11:27:42 2012 +0200
@@ -2,10 +2,12 @@
     enabled = true 
 }
 
-uploadMaven {
-    repositories.mavenDeployer {
-        pom.whenConfigured { p ->
-            p.dependencies.clear()
-        }
-    }
-}
+javadoc {
+    excludes = ['**/internal/**']
+    options.breakIterator="yes"
+    options.stylesheetFile=new File("svnkit/src/javadoc/javadoc.css")
+    options.windowTitle="SVNKit $project.version Javadoc"
+    title="SVNKit $project.version Javadoc"
+    header="<![CDATA[<a target=\"_top\" href=\"http://svnkit.com/\"><span class=\"svnkit\">SVNKit</span>&nbsp;Home<a/>]]>"
+    bottom="<![CDATA[Copyright &#169; 2004-2012 TMate Software Ltd. All Rights Reserved.]]>"
+}
\ No newline at end of file
diff -r 9abfa36f6139 svnkit-osgi/build.gradle
--- a/svnkit-osgi/build.gradle	Fri May 04 08:44:49 2012 +0200
+++ b/svnkit-osgi/build.gradle	Fri May 04 11:27:42 2012 +0200
@@ -52,11 +52,3 @@
         instruction 'Import-Package', '!*'
     }
 }
-
-uploadMaven {
-    repositories.mavenDeployer {
-        pom.whenConfigured { p ->
-            p.dependencies.clear()
-        }
-    }
-}
\ No newline at end of file
diff -r 9abfa36f6139 svnkit/build.gradle
--- a/svnkit/build.gradle	Fri May 04 08:44:49 2012 +0200
+++ b/svnkit/build.gradle	Fri May 04 11:27:42 2012 +0200
@@ -20,4 +20,8 @@
     title="SVNKit $project.version Javadoc"
     header="<![CDATA[<a target=\"_top\" href=\"http://svnkit.com/\"><span class=\"svnkit\">SVNKit</span>&nbsp;Home<a/>]]>"
     bottom="<![CDATA[Copyright &#169; 2004-2012 TMate Software Ltd. All Rights Reserved.]]>"
+}
+
+jar {
+    enabled = true 
 }
\ No newline at end of file
