# HG changeset patch
# Parent a4af96552d12110d35c4e715b6349cc1a1847c90
Location header should not be url encoded

diff -r a4af96552d12 svnkit-dav/src/main/java/org/tmatesoft/svn/core/internal/server/dav/handlers/ServletDAVHandler.java
--- a/svnkit-dav/src/main/java/org/tmatesoft/svn/core/internal/server/dav/handlers/ServletDAVHandler.java	Sat Dec 08 18:27:32 2012 +0100
+++ b/svnkit-dav/src/main/java/org/tmatesoft/svn/core/internal/server/dav/handlers/ServletDAVHandler.java	Sat Dec 08 18:54:15 2012 +0100
@@ -101,6 +101,7 @@
 import org.xml.sax.SAXNotRecognizedException;
 import org.xml.sax.SAXNotSupportedException;
 import org.tmatesoft.svn.core.internal.io.dav.http.XMLReader;
+import org.tmatesoft.svn.core.internal.util.SVNURLUtil;
 /**
  * @author TMate Software Ltd.
  * @version 1.2.0
@@ -1479,6 +1480,9 @@
             setResponseStatus(HttpServletResponse.SC_NO_CONTENT);
             return;
         }
+        
+        // location header should not be url encoded
+        location = SVNEncodingUtil.uriDecode(getURI());
 
         setResponseHeader(HTTPHeader.LOCATION_HEADER, constructURL(location));
         String body = what + " " + SVNEncodingUtil.xmlEncodeCDATA(location) + " has been created.";
